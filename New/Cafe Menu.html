<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>커피</title>
    <script src="translation.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Gulim', '굴림', sans-serif;
        }

        html,
        body {
            height: 100vh;
            overflow: hidden;
        }

        .page-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 1vh;
            height: 8vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header h1 {
            font-size: calc(1vh + 1vw);
            font-weight: bold;
        }

        #menu-container {
            width: 80vw;
            height: 80vh;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            padding: 1vh;
            margin: 0 auto;
        }

        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 1vh;
            border: 1px solid #ddd;
            border-radius: 0.5vh;
        }

        .image-container {
            height: 75%;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-item img {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
        }

        .text-container {
            height: 25%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .menu-item p {
            font-size: calc(0.8vh + 0.4vw);
            line-height: 1.2;
            text-align: center;
            margin: 0.5vh 0;
        }

        @media (max-width: 768px) {
            #menu-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            #menu-container {
                grid-template-columns: repeat(1, 1fr);
            }
        }

        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-content {
            background-color: white;
            padding: 2vh;
            border-radius: 1vh;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .popup-image {
            max-width: 80%;
            max-height: 60vh;
            object-fit: contain;
        }

        .popup-buttons {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 2vh;
        }

        .hot-button,
        .ice-button {
            padding: 1vh 2vh;
            border-radius: 0.5vh;
            border: none;
            color: white;
            cursor: pointer;
        }

        .hot-button {
            background-color: red;
        }

        .ice-button {
            background-color: blue;
        }

        .sold-out {
            position: relative;
        }

        .sold-out img {
            filter: grayscale(100%);
            opacity: 0.7;
        }

        .sold-out::before {
            content: "Sold Out";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: calc(1vh + 1vw);
            color: #8B0000;
            font-weight: bold;
            z-index: 10;
        }

        #close-popup {
            position: absolute;
            top: 1vh;
            right: 1vh;
            padding: 1vh;
            cursor: pointer;
        }

        .header.tabs {
            display: flex;
            gap: 1rem;
        }

        .header.tab {
            font-size: calc(1vh + 1vw);
            font-weight: bold;
            padding: 0.5vh 1vw;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
        }

        .header.tab.active {
            border-bottom-color: #4A5568;
        }
    </style>
</head>

<body>
    <div class="page-container">
        <header class="header">
            <h1 id="page-title"></h1>
            <div class="header tabs">
                <button class="header tab active" data-category="coffee">Coffee</button>
                <button class="header tab" data-category="non-coffee">Non-coffee</button>
                <button class="header tab" data-category="dessert">Dessert & Alcoholic</button>
            </div>
        </header>
        <div id="menu-container"></div>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <button id="close-popup">닫기</button>
            <img src="" alt="" class="popup-image" id="popup-image">
            <div class="popup-buttons">
                <button class="hot-button">HOT</button>
                <button class="ice-button">ICE</button>
            </div>
        </div>
    </div>
    <script>
        const menuItems = [{
                name: "아메리카노",
                price: 6000,
                image: "images/Americano.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "카페라떼",
                price: 6000,
                image: "images/CaffeLatte.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "바닐라라떼",
                price: 6000,
                image: "images/VanillaLatte.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "카페모카",
                price: 7000,
                image: "images/CaffeMocha.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "우도땅콩 크림라떼",
                price: 7000,
                image: "images/UdoPeanutCreamLatte.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "흑임자크림라떼",
                price: 7000,
                image: "images/BlackSesameCreamLatte.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "우도땅콩아이스크림라떼",
                price: 7000,
                image: "images/UdoPeanutIceCreamLatte.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "우도땅콩 아포카토",
                price: 7000,
                image: "images/UdoPeanutAffogato.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "에스프레소",
                price: 7000,
                image: "images/Espresso.png",
                availableOptions: ["hot"],
                soldOut: false,
                category: "coffee"
            },
            {
                name: "캐모마일",
                price: 6000,
                image: "images/ChamomileTea.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "청귤차",
                price: 6000,
                image: "images/GreenTangerineTea.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "한라봉차",
                price: 6000,
                image: "images/HallabongTea.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "초코라떼",
                price: 7000,
                image: "images/ChocolateLatte.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "녹차라떼",
                price: 7000,
                image: "images/GreenTeaLatte.png",
                availableOptions: ["ice", "hot"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "청귤에이드",
                price: 7000,
                image: "images/GreenTangerineAde.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "한라봉에이드",
                price: 7000,
                image: "images/HallabongAde.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "블루레몬에이드",
                price: 7000,
                image: "images/BlueLemonAde.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "non-coffee"
            },
            {
                name: "딸기밀크티라떼",
                price: 7000,
                image: "images/StrawberryMilkTeaLatte.png",
                availableOptions: ["ice"],
                soldOut: true,
                category: "non-coffee"
            },
            {
                name: "우도땅콩아이스크림",
                price: 6000,
                image: "images/UdoPeanutIceCream.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "dessert"
            },
            {
                name: "우도땅콩아이스크림과 크로플",
                price: 6000,
                image: "images/UdoPeanutIceCreamCroffle.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "dessert"
            },
            {
                name: "코로나",
                price: 7000,
                image: "images/Corona.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "dessert"
            },
            {
                name: "켈리",
                price: 7000,
                image: "images/Kelly.png",
                availableOptions: ["ice"],
                soldOut: false,
                category: "dessert"
            },
            {
                name: "1664 블랑",
                price: 6000,
                image: "images/1664Blanc.png",
                availableOptions: ["ice"],
                soldOut: true,
                category: "dessert"
            },
            {
                name: "빅 웨이브",
                price: 7000,
                image: "images/BigWave.png",
                availableOptions: ["ice"],
                soldOut: true,
                category: "dessert"
            }
        ];
        const translations = {
            ko: {
                title: "커피",
                tabs: {
                    coffee: "커피",
                    "non-coffee": "Non-커피",
                    dessert: "디저트 & 주류"
                },
                menu: {
                    "아메리카노": "아메리카노",
                    "카페라떼": "카페라떼",
                    "바닐라라떼": "바닐라라떼",
                    "카페모카": "카페모카",
                    "우도땅콩 크림라떼": "우도땅콩 크림라떼",
                    "흑임자크림라떼": "흑임자크림라떼",
                    "우도땅콩아이스크림라떼": "우도땅콩아이스크림라떼",
                    "우도땅콩 아포카토": "우도땅콩 아포카토",
                    "에스프레소": "에스프레소",
                    "캐모마일": "캐모마일",
                    "청귤차": "청귤차",
                    "한라봉차": "한라봉차",
                    "초코라떼": "초코라떼",
                    "녹차라떼": "녹차라떼",
                    "청귤에이드": "청귤에이드",
                    "한라봉에이드": "한라봉에이드",
                    "블루레몬에이드": "블루레몬에이드",
                    "딸기밀크티라떼": "딸기밀크티라떼",
                    "우도땅콩아이스크림": "우도땅콩아이스크림",
                    "우도땅콩아이스크림과 크로플": "우도땅콩아이스크림과 크로플",
                    "코로나": "코로나",
                    "켈리": "켈리",
                    "1664 블랑": "1664 블랑",
                    "빅 웨이브": "빅 웨이브"
                }
            },
            en: {
                title: "Coffee",
                tabs: {
                    coffee: "Coffee",
                    "non-coffee": "Non-coffee",
                    dessert: "Dessert & Alcoholic"
                },
                menu: {
                    "아메리카노": "Americano",
                    "카페라떼": "Caffe Latte",
                    "바닐라라떼": "Vanilla Latte",
                    "카페모카": "Caffe Mocha",
                    "우도땅콩 크림라떼": "Udo Peanut Cream Latte",
                    "흑임자크림라떼": "Black Sesame Cream Latte",
                    "우도땅콩아이스크림라떼": "Udo Peanut Ice Cream Latte",
                    "우도땅콩 아포카토": "Udo Peanut Affogato",
                    "에스프레소": "Espresso",
                    "캐모마일": "Chamomile Tea",
                    "청귤차": "Green Tangerine Tea",
                    "한라봉차": "Hallabong Tea",
                    "초코라떼": "Chocolate Latte",
                    "녹차라떼": "Green Tea Latte",
                    "청귤에이드": "Green Tangerine Ade",
                    "한라봉에이드": "Hallabong Ade",
                    "블루레몬에이드": "BlueLemon Ade",
                    "딸기밀크티라떼": "Strawberry milk tea latte",
                    "우도땅콩아이스크림": "Udo Peanut Ice Cream",
                    "우도땅콩아이스크림과 크로플": "Udo Peanut Ice Cream & Croffle",
                    "코로나": "Corona",
                    "켈리": "Kelly",
                    "1664 블랑": "1664 Blanc",
                    "빅 웨이브": "Big Wave"
                }
            },
            zh: {
                title: "咖啡",
                tabs: {
                    coffee: "咖啡",
                    "non-coffee": "非咖啡",
                    dessert: "甜点 & 酒类"
                },
                menu: {
                    "아메리카노": "美式咖啡",
                    "카페라떼": "拿铁咖啡",
                    "바닐라라떼": "香草拿铁",
                    "카페모카": "摩卡咖啡",
                    "우도땅콩 크림라떼": "牛岛花生奶油拿铁",
                    "흑임자크림라떼": "黑芝麻奶油拿铁",
                    "우도땅콩아이스크림라떼": "牛岛花生冰淇淋拿铁",
                    "우도땅콩 아포카토": "牛岛花生阿芙佳朵",
                    "에스프레소": "浓缩咖啡",
                    "캐모마일": "洋甘菊茶",
                    "청귤차": "青橘茶",
                    "한라봉차": "柑橘茶",
                    "초코라떼": "巧克力拿铁",
                    "녹차라떼": "抹茶拿铁",
                    "청귤에이드": "青桔汽水",
                    "한라봉에이드": "柑橘汽水",
                    "블루레몬에이드": "蓝色柠檬汽水",
                    "딸기밀크티라떼": "草莓奶茶拿铁",
                    "우도땅콩아이스크림": "牛岛花生冰淇淋",
                    "우도땅콩아이스크림과 크로플": "牛岛花生冰淇淋&可颂华夫",
                    "코로나": "科罗娜啤酒",
                    "켈리": "凯利啤酒",
                    "1664 블랑": "1664 白啤",
                    "빅 웨이브": "大浪啤酒"
                }
            },
            ja: {
                title: "コーヒー",
                tabs: {
                    coffee: "コーヒー",
                    "non-coffee": "ノンコーヒー",
                    dessert: "デザート & アルコール"
                },
                menu: {
                    "아메리카노": "アメリカーノ",
                    "카페라떼": "カフェラテ",
                    "바닐라라떼": "バニララテ",
                    "카페모카": "カフェモカ",
                    "우도땅콩 크림라떼": "ウドピーナッツクリームラテ",
                    "흑임자크림라떼": "黒ごまクリームラテ",
                    "우도땅콩아이스크림라떼": "ウドピーナッツアイスクリームラテ",
                    "우도땅콩 아포카토": "ウドピーナッツアフォガート",
                    "에스프레소": "エスプレッソ",
                    "캐모마일": "カモミールティー",
                    "청귤차": "青みかん茶",
                    "한라봉차": "ハルラボン茶",
                    "초코라떼": "チョコラテ",
                    "녹차라떼": "抹茶ラテ",
                    "청귤에이드": "青みかんエイド",
                    "한라봉에이드": "ハルラボンエイド",
                    "블루레몬에이드": "ブルーレモンエイド",
                    "딸기밀크티라떼": "ストロベリーミルクティーラテ",
                    "우도땅콩아이스크림": "ウドピーナッツアイスクリーム",
                    "우도땅콩아이스크림과 크로플": "ウドピーナッツアイスクリーム ＆ クロッフル",
                    "코로나": "コロナ",
                    "켈리": "ケリー",
                    "1664 블랑": "1664 ブラン",
                    "빅 웨이브": "ビッグウェーブ"
                }
            },
        };

let currentLang = 'ko';
let currentCategory = 'coffee'; // 현재 활성화된 탭의 카테고리 저장

        function formatNumber(number) {
            return number.toLocaleString();
        }

        function createMenuItem(item) {
            const menuItem = document.createElement('div');
            menuItem.className = 'menu-item';
            const imageContainer = document.createElement('div');
            imageContainer.className = 'image-container';
            const img = document.createElement('img');
            img.src = item.image;
            img.alt = item.name;
            imageContainer.appendChild(img);
            const textContainer = document.createElement('div');
            textContainer.className = 'text-container';
            // translations 객체를 사용하여 메뉴 이름 번역
            const translatedName = translations[currentLang].menu[item.name] || item.name;
            textContainer.innerHTML = `
                <p><strong>${translatedName}</strong></p>
                <p>₩ ${formatNumber(item.price)}</p>
            `;
            menuItem.appendChild(imageContainer);
            menuItem.appendChild(textContainer);
            if (item.soldOut) {
                menuItem.classList.add('sold-out');
            } else {
                menuItem.onclick = () => {
                    updatePopupContent(item);
                    document.getElementById('popup').style.display = 'flex';
                };
            }
            return menuItem;
        }

        function updatePopupContent(item) {
            const popupImage = document.getElementById('popup-image');
            popupImage.src = item.image;
            popupImage.alt = item.name;

            const hotButton = document.querySelector('.hot-button');
            const iceButton = document.querySelector('.ice-button');

            hotButton.style.display = item.availableOptions.includes('hot') ? 'inline-block' : 'none';
            iceButton.style.display = item.availableOptions.includes('ice') ? 'inline-block' : 'none';
        }

function updateLanguage(lang) {
    currentLang = lang;
    document.title = translations[lang].title;

    // 탭 텍스트 업데이트
    const tabs = document.querySelectorAll('.header.tab');
    tabs.forEach(tab => {
        const category = tab.dataset.category;
        tab.textContent = translations[lang].tabs[category]; // 탭 텍스트 번역
    });

    updateMenuItems();
}

        // 1. updateMenuItems 함수 중복 호출 수정
        window.addEventListener('DOMContentLoaded', (event) => {
            const menuContainer = document.getElementById('menu-container');

            const popup = document.getElementById('popup');
            popup.addEventListener('click', (event) => {
                if (event.target === popup) {
                    popup.style.display = 'none';
                }
updateLanguage(currentLang); // 페이지 로드 시 언어 업데이트
});

            // URL 매개변수 확인 및 언어 설정
            const urlParams = new URLSearchParams(window.location.search);
    currentLang = urlParams.get('lang') || 'ko'; // URL에서 lang 매개변수 값을 가져오거나, 없으면 기본값 'ko' 사용
            updateLanguage(lang);

            // 탭 클릭 이벤트 추가
            Array.from(tabs).forEach((tab, index) => {
                tab.addEventListener('click', () => {
                    // 탭 활성화 상태 변경
                    Array.from(tabs).forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // 선택된 탭의 종류에 따라 메뉴 업데이트
                    const category = tab.dataset.category;
                    updateMenuItems(category); // updateMenuItems 함수 호출 추가
                });
                // 첫 번째 탭 활성화
                if (index === 0) {
                    tab.classList.add('active');
                    updateMenuItems(tab.dataset.category);
                }
            });

            // 초기 메뉴 아이템 생성
            updateMenuItems(); // 페이지 로드 시 메뉴 아이템 생성
        });

        function updateMenuItems(category = 'coffee') { // 기본값을 'coffee'로 설정
            const menuContainer = document.getElementById('menu-container');
            menuContainer.innerHTML = '';

            // category가 제공되지 않더라도 'coffee' 카테고리 아이템만 표시
            const filteredItems = menuItems.filter(item => item.category === category);

            filteredItems.forEach(item => {
                const menuItem = createMenuItem(item);
                menuContainer.appendChild(menuItem);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // URL에서 언어 파라미터 확인
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang') || 'ko';

            // 언어 업데이트 전에 초기 카테고리('coffee')로 메뉴 업데이트
            updateMenuItems('coffee');
            updateLanguage(lang);

            // 탭 이벤트 리스너 설정
            const tabs = document.querySelectorAll('.header.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 이전 활성 탭 비활성화
                    document.querySelector('.header.tab.active').classList.remove('active');
                    // 현재 탭 활성화
                    tab.classList.add('active');
                    // 카테고리 업데이트 및 메뉴 새로고침
                    currentCategory = tab.dataset.category;
                    updateMenuItems(currentCategory);
                });
            });

            // 팝업 닫기 이벤트 설정
            const popup = document.getElementById('popup');
            const closePopup = document.getElementById('close-popup');

            popup.addEventListener('click', (event) => {
                if (event.target === popup) {
                    popup.style.display = 'none';
                }
            });

            closePopup.addEventListener('click', () => {
                popup.style.display = 'none';
            });
        });
    </script>
</body>

</html>